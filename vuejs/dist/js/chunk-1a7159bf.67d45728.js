(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7159bf"],{"44e7":function(e,s,t){var i=t("861d"),a=t("c6b6"),n=t("b622"),r=n("match");e.exports=function(e){var s;return i(e)&&(void 0!==(s=e[r])?!!s:"RegExp"==a(e))}},"4d63":function(e,s,t){var i=t("83ab"),a=t("da84"),n=t("94ca"),r=t("7156"),l=t("9bf2").f,c=t("241c").f,d=t("44e7"),o=t("ad6d"),u=t("9f7f"),h=t("6eeb"),m=t("d039"),p=t("69f3").set,g=t("2626"),v=t("b622"),f=v("match"),C=a.RegExp,w=C.prototype,b=/a/g,_=/a/g,x=new C(b)!==b,U=u.UNSUPPORTED_Y,I=i&&n("RegExp",!x||U||m((function(){return _[f]=!1,C(b)!=b||C(_)==_||"/a/i"!=C(b,"i")})));if(I){var k=function(e,s){var t,i=this instanceof k,a=d(e),n=void 0===s;if(!i&&a&&e.constructor===k&&n)return e;x?a&&!n&&(e=e.source):e instanceof k&&(n&&(s=o.call(e)),e=e.source),U&&(t=!!s&&s.indexOf("y")>-1,t&&(s=s.replace(/y/g,"")));var l=r(x?new C(e,s):C(e,s),i?this:w,k);return U&&t&&p(l,{sticky:t}),l},M=function(e){e in k||l(k,e,{configurable:!0,get:function(){return C[e]},set:function(s){C[e]=s}})},E=c(C),y=0;while(E.length>y)M(E[y++]);w.constructor=k,k.prototype=w,h(a,"RegExp",k)}g("RegExp")},7156:function(e,s,t){var i=t("861d"),a=t("d2bb");e.exports=function(e,s,t){var n,r;return a&&"function"==typeof(n=s.constructor)&&n!==t&&i(r=n.prototype)&&r!==t.prototype&&a(e,r),e}},8129:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"content mt-2"},[t("h1",{staticClass:"title has-text-centered has-text-weight-bold has-text-white"},[e._v("Manage Your Users")]),t("div",{staticClass:"loading"},[t("loading",{attrs:{active:e.loading,"can-cancel":!1,"is-full-page":e.fullpage},on:{"update:active":function(s){e.loading=s}}})],1),t("div",{staticClass:"columns mx-3 is-mobile is-multiline is-vcentered"},[t("div",{staticClass:"column is-full"},[t("div",{staticClass:"columns is-desktop is-multiline is-vcentered is-centered"},[t("div",{staticClass:"column has-text-centered is-3"},[t("p",{staticClass:"control has-icons-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchEmail,expression:"searchEmail"}],staticClass:"input is-rounded",attrs:{placeholder:"Enter User's Email",autofocus:"",id:"email",type:"email"},domProps:{value:e.searchEmail},on:{input:function(s){s.target.composing||(e.searchEmail=s.target.value)}}}),e._m(0)])]),t("div",{staticClass:"column has-text-centered is-3"},[t("button",{class:e.loading?"button is-rounded is-loading is-warning":"button is-rounded is-warning",on:{click:e.handleRefresh}},[e._m(1),t("span",[e._v("Refresh")])])])])]),t("div",{class:e.usermodal?"modal is-active":"modal"},[t("div",{staticClass:"modal-background"}),t("div",{staticClass:"modal-card"},[t("header",{staticClass:"modal-card-head"},[t("p",{staticClass:"modal-card-title has-text-centered"},[e._v(e._s(e.currentUser.name))]),t("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:e.closeUserModal}})]),t("section",{staticClass:"modal-card-body"},[t("div",{staticClass:"columns is-mobile is-centered is-vcentered is-multiline"},[e._m(2),t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.name))])]),e._m(3),t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.email))])]),e._m(4),t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-semibold"},[e._v(e._s(e.currentUser.role))])]),t("div",{staticClass:"column is-full"},[t("article",{class:e.errorMessage?"message is-danger":"message is-hidden is-danger"},[t("div",{staticClass:"message-body"},[t("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(s){e.errorMessage=!1}}}),e._v(" "+e._s(e.resultmessage)+" ")])])]),t("div",{staticClass:"column is-full"},[t("article",{class:e.successMessage?"message is-success":"message is-hidden is-success"},[t("div",{staticClass:"message-body"},[t("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(s){e.successMessage=!1}}}),e._v(" "+e._s(e.resultmessage)+" ")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],class:e.admin&&e.superadmin?e.currentUser.admin&&e.currentUser.superadmin&&!e.currentUser.pending?"column has-text-centered is-half":"column has-text-right is-quarter":"column has-text-centered is-half"},[t("button",{staticClass:"button is-rounded is-danger",on:{click:function(s){e.deleteInput=!0}}},[e._v(" Delete ")])]),!e.admin||!e.superadmin||e.currentUser.admin||e.currentUser.superadmin||e.currentUser.pending?e._e():t("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[t("button",{staticClass:"button is-rounded is-primary",on:{click:function(s){e.inviteInput=!0}}},[e._v(" Invite as Admin ")])]),e.admin&&e.superadmin&&e.currentUser.admin&&!e.currentUser.superadmin&&!e.currentUser.pending?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[t("button",{staticClass:"button is-rounded is-primary",on:{click:function(s){e.inviteInput=!0}}},[e._v(" Invite as Superadmin ")])]):e._e(),e.admin&&e.superadmin&&!e.currentUser.admin&&!e.currentUser.superadmin&&e.currentUser.pending?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[t("button",{staticClass:"button is-rounded is-primary",on:{click:function(s){return e.gotoPage("/","register")}}},[e._v(" Grant Admin ")])]):e._e(),e.admin&&e.superadmin&&e.currentUser.admin&&!e.currentUser.superadmin&&e.currentUser.pending?t("div",{directives:[{name:"show",rawName:"v-show",value:!e.inviteInput&&!e.deleteInput,expression:"!inviteInput && !deleteInput"}],staticClass:"column has-text-left is-quarter has-text-centered"},[t("button",{staticClass:"button is-rounded is-primary",on:{click:function(s){return e.gotoPage("/","register")}}},[e._v(" Grant Superadmin ")])]):e._e(),e.inviteInput?t("div",{staticClass:"column is-full"},[t("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t("div",{staticClass:"column is-full"},[t("div",{staticClass:"field"},[t("div",{staticClass:"control"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inviteMessage,expression:"inviteMessage"}],staticClass:"textarea is-success is-rounded",attrs:{placeholder:"Message to Him",id:"message",rows:"3",required:""},domProps:{value:e.inviteMessage},on:{input:function(s){s.target.composing||(e.inviteMessage=s.target.value)}}})])])]),t("div",{staticClass:"column has-text-right is-half"},[t("button",{staticClass:"button is-rounded is-primary",on:{click:function(s){return e.handleInvite(e.currentUser)}}},[e._v(" Invite ")])]),t("div",{staticClass:"column has-text-left is-half",on:{click:function(s){e.inviteInput=!1,e.errorMessage=!1}}},[t("button",{staticClass:"button is-rounded is-success"},[e._v(" Cancel ")])])])]):e._e(),e.deleteInput?t("div",{staticClass:"column is-full"},[t("div",{staticClass:"columns is-mobile is-multiline is-centered"},[t("div",{staticClass:"column is-full"},[t("div",{staticClass:"field"},[t("p",{staticClass:"control has-icons-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.deletePassword,expression:"deletePassword"}],staticClass:"input is-rounded is-danger",attrs:{id:"deletePassword",type:"password",placeholder:"Enter Your Admin Password"},domProps:{value:e.deletePassword},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleUpgradeDelete(e.currentUser,"delete")},input:function(s){s.target.composing||(e.deletePassword=s.target.value)}}}),e._m(5)])])]),t("div",{staticClass:"column has-text-right is-half"},[t("button",{staticClass:"button is-rounded is-danger",on:{click:function(s){return e.handleUpgradeDelete(e.currentUser,"delete")}}},[e._v(" Delete ")])]),t("div",{staticClass:"column has-text-left is-half",on:{click:function(s){e.deleteInput=!1,e.errorMessage=!1}}},[t("button",{staticClass:"button is-rounded is-success"},[e._v(" Cancel ")])])])]):e._e()])])])]),e.searchedUsers.length>0?t("div",{staticClass:"column is-full"},[t("table",{staticClass:"table"},[e._m(6),t("tfoot",[t("tr",[t("th",{staticClass:"has-text-white"},[e._v("Total Users")]),t("th",{staticClass:"has-text-white"},[e._v(e._s(e.searchedUsers.length))])])]),t("tbody",e._l(e.searchedUsers,(function(s,i){return t("tr",{key:i},[t("th",{staticClass:"has-text-white"},[e._v(e._s(s.name))]),t("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v(e._s(s.email.slice(0,30)))]),t("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v(e._s(s.role))]),t("th",{staticClass:"has-text-white"},[t("button",{staticClass:"button is-danger is-rounded",on:{click:function(t){return e.userModal(s)}}},[e._v(" View ")])])])})),0)])]):t("div",{staticClass:"column is-full"},[t("p",{staticClass:"subtitle has-text-centered has-text-white"},[e._v("Please Click Refresh Button to Load Users")])])])])])},a=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"icon is-small is-right"},[t("i",{staticClass:"fas fa-search"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-sync"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Name")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Email")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"column is-half"},[t("p",{staticClass:"subtitle has-text-black has-text-weight-normal"},[e._v("Role")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-lock"})])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("thead",[t("tr",[t("th",{staticClass:"has-text-white"},[e._v("Name")]),t("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v("Email")]),t("th",{staticClass:"has-text-white is-hidden-mobile is-hidden-touch"},[e._v("Role")]),t("th",{staticClass:"has-text-white"},[e._v("Action")])])])}],n=(t("4de4"),t("4160"),t("d81d"),t("d3b7"),t("4d63"),t("ac1f"),t("25f0"),t("159b"),t("9062")),r=t.n(n),l={components:{Loading:r.a},data:function(){return{user:{},token:{},users:[],gds:[],currgd:{},deletePassword:"",errorMessage:!1,successMessage:!1,inviteAdmin:window.apiRoutes.inviteAdmin,inviteSuperAdmin:window.apiRoutes.inviteSuperAdmin,deleteUser:window.apiRoutes.deleteUser,deleteAdmin:window.apiRoutes.deleteAdmin,inviteInput:!1,deleteInput:!1,inviteApi:"",inviteMessage:"",resultmessage:"",currentUser:{},usermodal:!1,searchedUsers:[],apiurl:"",searchEmail:"",admin:!1,superadmin:!1,loading:!1,fullpage:!0}},methods:{handleRefresh:function(){var e=this;this.loading=!0,this.apiurl.length>0&&this.$http.post(this.apiurl,{email:this.user.email}).then((function(s){s.data.auth&&s.data.registered?(e.loading=!1,e.users=s.data.users,e.searchedUsers=s.data.users):console.log(s)}))},gotoPage:function(e,s){s?this.$router.push({path:"/"+this.currgd.id+":"+s+e}):this.$router.push({path:"/"+this.currgd.id+":"+e})},handleUpgradeDelete:function(e,s){var t=this;this.loading=!0;var i="";"delete"==s&&(i="User"==e.role?this.deleteUser:this.deleteAdmin),this.$http.post(i,{email:e.email,adminpass:this.deletePassword,adminuseremail:this.user.email}).then((function(e){"delete"==s&&(e.data.auth&&e.data.registered&&e.data.deleted?(t.usermodal=!1,t.currentUser={},t.errorMessage=!1,t.successMessage=!1,t.inviteInput=!1,t.deleteInput=!1,t.deletePassword="",t.loading=!1,t.handleRefresh()):(t.loading=!1,t.errorMessage=!0,t.successMessage=!1,t.resultmessage=e.data.message))}))},handleInvite:function(e){var s=this;this.loading=!0;var t="";t="User"==e.role?this.inviteAdmin:this.inviteSuperAdmin,"Admin"==e.role||"User"==e.role&&this.inviteMessage.length>0?this.$http.post(t,{email:e.email,message:this.inviteMessage,adminuseremail:this.user.email}).then((function(e){e.data.auth&&e.data.registered?(s.successMessage=!0,s.errorMessage=!1,s.resultmessage=e.data.message,s.loading=!1):(s.successMessage=!1,s.errorMessage=!0,s.resultmessage=e.data.message,s.loading=!1)})):console.log(this.inviteMessage)},userModal:function(e){var s=this;this.usermodal=!0,this.errorMessage=!1,this.successMessage=!1,this.currentUser=e;var t="";"User"==e.role?t=window.apiRoutes.getPendingAdmins:"Admin"==e.role&&(t=window.apiRoutes.getPendingSuperAdmins),console.log(t),"User"==e.role||"Admin"==e.role?(this.loading=!0,this.$http.post(t,{adminuseremail:this.user.email}).then((function(t){t?(console.log(t),t.data.auth&&t.data.registered?t.data.users.forEach((function(t){t.email==e.email?(s.loading=!1,s.currentUser.pending=!0):(s.loading=!1,s.currentUser.pending=!1)})):(s.loading=!1,s.currentUser.pending=!1)):(s.loading=!1,s.currentUser.pending=!1)}))):(this.loading=!1,this.currentUser.pending=!1)},closeUserModal:function(){this.usermodal=!1,this.currentUser={},this.errorMessage=!1,this.successMessage=!1,this.inviteInput=!1,this.deleteInput=!1,this.deletePassword=""}},beforeMount:function(){this.loading=!0;var e=localStorage.getItem("tokendata"),s=localStorage.getItem("userdata");if(null!=s&&null!=e){var t=JSON.parse(this.$hash.AES.decrypt(e,this.$pass).toString(this.$hash.enc.Utf8)),i=JSON.parse(this.$hash.AES.decrypt(s,this.$pass).toString(this.$hash.enc.Utf8));this.user=i,this.token=t,this.loading=!1}else this.user=null,this.token=null,this.loading=!1},mounted:function(){this.user.admin&&this.user.superadmin?(this.admin=!0,this.superadmin=!0,this.loading=!1,this.apiurl=window.apiRoutes.getAll):this.user.admin&&!this.user.superadmin?(this.admin=!0,this.superadmin=!1,this.loading=!1,this.apiurl=window.apiRoutes.getUsers):this.$router.push({name:"results",params:{id:this.currgd.id,cmd:"result",data:"UnAuthorized Route.",redirectUrl:"/",tocmd:"home"}})},created:function(){if(window.gds){this.gds=window.gds.map((function(e,s){return{name:e,id:s}}));var e=this.$route.params.id;this.gds&&(this.currgd=this.gds[e])}},watch:{searchEmail:function(){if(this.users.length){var e=this.searchEmail,s=new RegExp(e,"g");this.searchedUsers=this.users.filter((function(e){return s.test(e.email)}))}}}},c=l,d=t("2877"),o=Object(d["a"])(c,i,a,!1,null,null,null);s["default"]=o.exports}}]);