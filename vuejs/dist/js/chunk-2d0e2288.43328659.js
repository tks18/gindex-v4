(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e2288"],{"7e04":function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"content mt-3"},[a("h1",{staticClass:"title has-text-centered has-text-weight-bold has-text-white"},[e._v("Manage Spam Users")]),a("div",{staticClass:"loading"},[a("loading",{attrs:{active:e.loading,"can-cancel":!1,"is-full-page":e.fullpage},on:{"update:active":function(s){e.loading=s}}})],1),a("div",{staticClass:"columns has-text-centered is-multiline is-centered is-vcentered"},[a("div",{staticClass:"column is-two-thirds"},[a("div",{staticClass:"control mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],staticClass:"is-checkradio is-small is-success",attrs:{id:"addradio",type:"radio",name:"type",value:"add"},domProps:{checked:e._q(e.type,"add")},on:{change:function(s){e.type="add"}}}),a("label",{staticClass:"subtitle has-text-weight-bold has-text-white",attrs:{for:"addradio"}},[e._v("Add")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],staticClass:"is-checkradio is-small is-success",attrs:{id:"removeradio",type:"radio",name:"type",value:"remove"},domProps:{checked:e._q(e.type,"remove")},on:{change:function(s){e.type="remove"}}}),a("label",{staticClass:"subtitle has-text-weight-bold has-text-white",attrs:{for:"removeradio"}},[e._v("Remove")])]),a("article",{class:e.errormessageVisibility?"message is-danger":"message is-hidden is-danger"},[a("div",{staticClass:"message-header"},[a("p",[e._v("Error Logging in!!")]),a("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(s){e.errormessageVisibility=!1}}})]),a("div",{staticClass:"message-body"},[e._v(" "+e._s(e.resultmessage)+" ")])]),a("article",{class:e.successmessageVisibility?"message is-success":"message is-hidden is-success"},[a("div",{staticClass:"message-header"},[a("p",[e._v("Success !")]),a("button",{staticClass:"delete",attrs:{"aria-label":"delete"},on:{click:function(s){e.successmessageVisibility=!1}}})]),a("div",{staticClass:"message-body"},[e._v(" "+e._s(e.resultmessage)+" ")])])]),"add"==e.type?a("div",{staticClass:"column is-half"},[a("p",{staticClass:"subtitle is-small has-text-white"},[e._v("Add Users to Spam List")]),a("form",{on:{submit:function(s){return s.preventDefault(),e.handleAddSpam(s)}}},[a("label",{staticClass:"subtitle has-text-white"},[e._v("Select User's Role First")]),a("div",{staticClass:"control mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addrole,expression:"addrole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"useraddradio",type:"radio",name:"addrole",checked:"",value:"user",disabled:e.roledisabled},domProps:{checked:e._q(e.addrole,"user")},on:{change:function(s){e.addrole="user"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"useraddradio"}},[e._v("User")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addrole,expression:"addrole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"adminaddradio",type:"radio",name:"addrole",value:"admin",disabled:e.roledisabled},domProps:{checked:e._q(e.addrole,"admin")},on:{change:function(s){e.addrole="admin"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"adminaddradio"}},[e._v(" Admin")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addrole,expression:"addrole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"superadminaddradio",type:"radio",name:"addrole",value:"superadmin",disabled:e.roledisabled},domProps:{checked:e._q(e.addrole,"superadmin")},on:{change:function(s){e.addrole="superadmin"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"superadminaddradio"}},[e._v("Superadmin")])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label has-text-white"},[e._v("Select the User")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select is-fullwidth"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.addUserEmail,expression:"addUserEmail"}],attrs:{id:"addemail"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var s="_value"in e?e._value:e.value;return s}));e.addUserEmail=s.target.multiple?a:a[0]}}},e._l(e.users,(function(s,t){return a("option",{key:t,attrs:{placeholder:"Select the User"}},[e._v(e._s(s.email))])})),0)])])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.addmessage,expression:"addmessage"}],staticClass:"textarea is-success is-rounded",attrs:{placeholder:"Reason for Adding Him",id:"message",rows:"3",required:""},domProps:{value:e.addmessage},on:{input:function(s){s.target.composing||(e.addmessage=s.target.value)}}})])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addpassword,expression:"addpassword"}],staticClass:"input is-rounded",attrs:{id:"addpassword",type:"password",placeholder:"Password",required:""},domProps:{value:e.addpassword},on:{input:function(s){s.target.composing||(e.addpassword=s.target.value)}}}),e._m(0)])]),a("button",{class:e.loading?"button is-rounded is-loading is-danger is-medium":"button is-rounded is-medium is-danger"},[e._m(1),a("span",[e._v("Add to Spam")])])])]):e._e(),"remove"==e.type?a("div",{staticClass:"column is-half"},[a("p",{staticClass:"subtitle is-small has-text-white"},[e._v("Remove Users from Spam")]),a("form",{on:{submit:function(s){return s.preventDefault(),e.handleRemoveSpam(s)}}},[a("label",{staticClass:"subtitle has-text-white"},[e._v("Select User's Role First")]),a("div",{staticClass:"control mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.removerole,expression:"removerole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"userremradio",type:"radio",name:"addrole",checked:"",value:"user",disabled:e.roledisabled},domProps:{checked:e._q(e.removerole,"user")},on:{change:function(s){e.removerole="user"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"userremradio"}},[e._v("User")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.removerole,expression:"removerole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"adminremradio",type:"radio",name:"addrole",value:"admin",disabled:e.roledisabled},domProps:{checked:e._q(e.removerole,"admin")},on:{change:function(s){e.removerole="admin"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"adminremradio"}},[e._v(" Admin")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.removerole,expression:"removerole"}],staticClass:"is-checkradio is-small is-warning",attrs:{id:"superadminremradio",type:"radio",name:"addrole",value:"superadmin",disabled:e.roledisabled},domProps:{checked:e._q(e.removerole,"superadmin")},on:{change:function(s){e.removerole="superadmin"}}}),a("label",{staticClass:"has-text-white",attrs:{for:"superadminremradio"}},[e._v("Superadmin")])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label has-text-white"},[e._v("Select the User")]),a("div",{staticClass:"control"},[a("div",{staticClass:"select is-fullwidth"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.removeUserEmail,expression:"removeUserEmail"}],attrs:{id:"removeemail"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var s="_value"in e?e._value:e.value;return s}));e.removeUserEmail=s.target.multiple?a:a[0]}}},e._l(e.spamUsers,(function(s,t){return a("option",{key:t,attrs:{placeholder:"Select the User"}},[e._v(e._s(s.email))])})),0)])])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.removepassword,expression:"removepassword"}],staticClass:"input is-rounded",attrs:{id:"removepassword",type:"password",placeholder:"Password",required:""},domProps:{value:e.removepassword},on:{input:function(s){s.target.composing||(e.removepassword=s.target.value)}}}),e._m(2)])]),a("button",{class:e.loading?"button is-rounded is-loading is-danger is-medium":"button is-rounded is-medium is-danger"},[e._m(3),a("span",[e._v("Allow Him")])])])]):e._e()])])},i=[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-lock"})])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("span",{staticClass:"icon is-medium"},[a("i",{staticClass:"fas fa-user-minus"})])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-lock"})])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("span",{staticClass:"icon is-medium"},[a("i",{staticClass:"fas fa-user-plus"})])}],r=(a("d81d"),a("d3b7"),a("25f0"),a("9062")),d=a.n(r),o={components:{Loading:d.a},data:function(){return{user:{},admin:!1,superadmin:!1,roledisabled:!0,loading:!1,addrole:"",addpassword:"",addmessage:"",removerole:"",removeUserEmail:"",removepassword:"",users:[],spamUsers:[],getUserApi:"",postAddSpam:"",getSpamApi:"",postSpamApi:"",addUserEmail:"",fullpage:!0,errormessageVisibility:!1,successmessageVisibility:!1,resultmessage:"",type:"",gds:[],currgd:{}}},methods:{getUsers:function(){var e=this;this.loading=!0,this.getUserApi.length>0?this.$http.post(this.getUserApi,{email:this.user.email}).then((function(s){s.data.auth&&s.data.registered?(e.loading=!1,e.users=s.data.users):(e.users=[],e.loading=!1)})):(this.loading=!1,console.log("Not Possible"))},getSpamUsers:function(){var e=this;this.loading=!0,this.getUserApi.length>0?this.$http.post(this.getSpamApi,{adminuseremail:this.user.email}).then((function(s){s.data.auth&&s.data.registered?(e.loading=!1,e.spamUsers=s.data.users):(e.spamUsers=[],e.loading=!1)})):(this.loading=!1,console.log("Not Possible"))},handleAddSpam:function(){var e=this;this.loading=!0,this.addUserEmail.length>0&&this.addpassword.length>0&&this.$http.post(this.postAddSpam,{email:this.addUserEmail,message:this.addmessage,adminuseremail:this.user.email,adminpass:this.addpassword}).then((function(s){s.data.auth&&s.data.registered?(e.successmessageVisibility=!0,e.errormessageVisibility=!1,e.resultmessage=s.data.message,e.loading=!1):(e.successmessageVisibility=!1,e.errormessageVisibility=!0,e.resultmessage=s.data.message,e.loading=!1)}))},handleRemoveSpam:function(){var e=this;this.loading=!0,this.removeUserEmail.length>0&&this.removepassword.length>0?this.$http.post(this.postSpamApi,{email:this.removeUserEmail,adminuseremail:this.user.email,password:this.removepassword}).then((function(s){s.data.auth&&s.data.deleted?(e.successmessageVisibility=!0,e.errormessageVisibility=!1,e.resultmessage=s.data.message,e.loading=!1):(e.successmessageVisibility=!1,e.errormessageVisibility=!0,e.resultmessage=s.data.message,e.loading=!1)})):console.log("Not Possible")}},beforeMount:function(){this.loading=!0;var e=localStorage.getItem("userdata"),s=localStorage.getItem("tokendata");if(e&&s){var a=JSON.parse(this.$hash.AES.decrypt(e,this.$pass).toString(this.$hash.enc.Utf8));this.user=a,this.loading=!1}else this.user=null,this.loading=!1},mounted:function(){this.loading=!0,this.user.admin&&this.user.superadmin?(this.admin=!0,this.superadmin=!0,this.roledisabled=!1,this.loading=!1,this.addrole="user",this.removerole="user",this.getUserApi=window.apiRoutes.getUsers,this.postAddSpam=window.apiRoutes.addSpamUser,this.getSpamApi=window.apiRoutes.getSpamUsers,this.postSpamApi=window.apiRoutes.removeSpamUser,this.getUsers(),this.getSpamUsers()):this.user.admin&&!this.user.superadmin?(this.admin=!0,this.superadmin=!1,this.loading=!1,this.addrole="user",this.removerole="user",this.getUserApi=window.apiRoutes.getUsers,this.postAddSpam=window.apiRoutes.addSpamUser,this.getSpamApi=window.apiRoutes.getSpamUsers,this.postSpamApi=window.apiRoutes.removeSpamUser,this.getUsers(),this.getSpamUsers()):(this.loading=!1,this.$router.push({name:"results",params:{id:this.currgd.id,cmd:"result",success:!1,data:"UnAuthorized Route. Not Allowed.",redirectUrl:"/",tocmd:"home"}}))},created:function(){if(window.gds){this.gds=window.gds.map((function(e,s){return{name:e,id:s}}));var e=this.$route.params.id;this.gds&&(this.currgd=this.gds[e])}},watch:{addrole:function(){"user"==this.addrole?(this.getUserApi=window.apiRoutes.getUsers,this.postAddSpam=window.apiRoutes.addSpamUser,this.getUsers()):"admin"==this.addrole?(this.getUserApi=window.apiRoutes.getAdmins,this.postAddSpam=window.apiRoutes.addSpamAdmin,this.getUsers()):"superadmin"==this.addrole&&(this.getUserApi=window.apiRoutes.getSuperAdmins,this.postAddSpam=window.apiRoutes.addSpamSuperAdmin,this.getUsers())},removerole:function(){"user"==this.removerole?(this.getSpamApi=window.apiRoutes.getSpamUsers,this.postSpamApi=window.apiRoutes.removeSpamUser,this.getSpamUsers()):"admin"==this.removerole?(this.getSpamApi=window.apiRoutes.getSpamAdmins,this.postSpamApi=window.apiRoutes.removeSpamAdmin,this.getSpamUsers()):"superadmin"==this.removerole&&(this.getSpamApi=window.apiRoutes.getSpamSuperadmins,this.postSpamApi=window.apiRoutes.removeSpamSuperadmin,this.getSpamUsers())}}},l=o,n=a("2877"),m=Object(n["a"])(l,t,i,!1,null,null,null);s["default"]=m.exports}}]);